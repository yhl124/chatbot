<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>청년온기 회원가입</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <div class="w-full h-auto relative overflow-hidden bg-white mx-auto">
        <p class="absolute left-1/2 transform -translate-x-1/2 top-6 text-2xl md:text-4xl font-bold text-left">
            <span class="text-[#5856d6]">청년</span><span class="text-black">온기</span><span class="text-[#ff3b30]"> </span>
        </p>
        
        <form th:action="@{/upload}" method="post" id="signupForm" accept-charset="UTF-8" enctype="multipart/form-data">
		    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
		    <div class="flex flex-col justify-start items-center w-full max-w-sm mx-auto p-6 mt-20 gap-6 rounded-lg bg-white border border-[#d9d9d9]">
		        
		        <div class="flex justify-center items-center w-full relative overflow-hidden gap-2">
		            <div class="w-16 h-16 relative rounded-full overflow-hidden">
		                <img id="profileImage" src="images/defaultprofile.jpg" class="w-16 h-16 absolute object-cover" />
		            </div>
		            <input type="file" id="imageUpload" name="file" accept="image/jpeg, image/png, image/jpg" style="display: none;" />
		            <button type="button" id="uploadButton" class="w-8 h-8 flex justify-center items-center bg-transparent border-none p-0 m-0">
		                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
		                    <path d="M28 20V25.3333C28 26.0406 27.719 26.7189 27.219 27.219C26.7189 27.719 26.0406 28 25.3333 28H6.66667C5.95942 28 5.28115 27.719 4.78105 27.219C4.28095 26.7189 4 26.0406 4 25.3333V20M22.6667 10.6667L16 4M16 4L9.33333 10.6667M16 4V20" stroke="#1E1E1E" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
		                </svg>
		            </button>
		            <button type="button" id="deleteButton" class="w-8 h-8 flex justify-center items-center bg-transparent border-none p-0 m-0">
		                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
		                    <path d="M4 7.99996H6.66667M6.66667 7.99996H28M6.66667 7.99996V26.6666C6.66667 27.3739 6.94762 28.0521 7.44772 28.5522C7.94781 29.0523 8.62609 29.3333 9.33333 29.3333H22.6667C23.3739 29.3333 24.0522 29.0523 24.5523 28.5522C25.0524 28.0521 25.3333 27.3739 25.3333 26.6666V7.99996M10.6667 7.99996V5.33329C10.6667 4.62605 10.9476 3.94777 11.4477 3.44767C11.9478 2.94758 12.6261 2.66663 13.3333 2.66663H18.6667C19.3739 2.66663 20.0522 2.94758 20.5523 3.44767C21.0524 3.94777 21.3333 4.62605 21.3333 5.33329V7.99996M13.3333 14.6666V22.6666M18.6667 14.6666V22.6666" stroke="#1E1E1E" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
		                </svg>
		            </button>
		        </div>
		        <div id="upupupup"></div>
		        <div class="flex justify-center items-center w-full gap-4">
		            <button type="submit" id="signupBtn" class="hover:bg-[#5856d6] flex justify-center items-center w-full h-12 rounded-lg bg-[#2c2c2c] text-neutral-100 disabled:bg-slate-400">가입하기</button>
		        </div>
		    </div>
		</form>

    </div>
    <script>
	    $(document).ready(function() {
	        // 이미지 업로드
	        $('#uploadButton').click(function() {
	            $('#imageUpload').click();
	        });
	
	        $('#imageUpload').change(function() {
	            var reader = new FileReader();
	            reader.onload = function(e) {
	                $('#profileImage').attr('src', e.target.result);
	            }
	            reader.readAsDataURL(this.files[0]);
	        });
	
	        // 이미지 삭제
	        $('#deleteButton').click(function() {
	            $('#profileImage').attr('src', 'images/defaultprofile.jpg');
	            $('#imageUpload').val('');
	        });
	
/* 	        $('#signupBtn').click(function() {
	            var formData = new FormData($('#signupForm')[0]);
	
	            // CSRF 토큰을 폼 데이터에 추가
	            var csrfToken = $("input[name='_csrf']").val();
	            formData.append('_csrf', csrfToken);
	
	            $.ajax({
	                url: '/upload',
	                type: 'POST',
	                data: formData,
	                processData: false, // tell jQuery not to process the data
	                contentType: false, // tell jQuery not to set contentType
	                success: function(response) {
	                    if (response.result === 'success') {
	                        $('#upupupup').text('파일 업로드 성공').css('color', 'green');
	                    } else {
	                        $('#upupupup').text('파일 업로드 실패').css('color', 'red');
	                    }
	                },
	                error: function() {
	                    $('#upupupup').text('파일 업로드 중 오류 발생').css('color', 'red');
	                }
	            });
	        }); */
	    });

    </script>
</body>
</html>
